<div class="card">
  <div class="card-body">
    <h4 class="card-title center">{{currentleague.myDeck}} 
      {% if currentleague.myFlavor.name != "none/stock" %}
        {{currentleague.myFlavor}}
      {% endif %}
      <span class="text-muted"> started on </span> {{currentleague.date}}</h4>
    <!-- match form -->
    <form method="POST">
      {% csrf_token %} {{ matchformset.management_form }}
      <table class="table table-hover table-borderless smalltable">
        {% for form in matchformset %} {% if forloop.first %}
        <thead>
          <tr>
            <th>#</th>
            {% for field in form.visible_fields %}
            <th class="center">
              {% if field.name == "game1" %}
                1
              {% elif field.name == "game2" %}
                2
              {% elif field.name == "game3" %}
                3
              {% else %}
                {{ field.label }}
              {% endif %}
            </th>
            {% endfor %}
          </tr>
        </thead>
        {% endif %}
        <tbody>
          <tr>
            <td>{{ forloop.counter }}</td>
            {% for field in form %}
            <td class="center">
              {% if field.name == "date" %}
                <button type='button' _="on click toggle .hidden on me then toggle .hidden on next .hidden">date</button>
                {{ field.errors.as_ul }}
                {{ field }}
              {% elif field.name == "theirArchetype" %} 
                <button type='button' _="on click toggle .hidden on me then toggle .hidden on next .hidden">Archetype</button>
                {{ field.errors.as_ul }}
                {{ field }}
              {% elif field.name == "theirname" %}
                {{ field.errors.as_ul }}
                {{ field }}
                <datalist id="usernamelist">
                  {% for match in usernamelist %}
                    <option value="{{match.theirname}}"></option>
                  {% endfor %}
                </datalist>
              {% else %}
                {{ field.errors.as_ul }} 
                {{ field }} 
              {% endif %}
              {{field.help_text}}
            </td>
            {% endfor %}
          </tr>
        </tbody>
        {% endfor %}
      </table>
      <div class="container">
        <div class="row mt-2">
          <div class="col-9" id="namereceptor">
            <small>*Date is automatically set to now, and Archetype is automatically set to match your opponent's deck, after you fill it in, but you can edit these manually if you need to.</small>
          </div>
          <div class="col">
            <button type="submit" class="btn btn-danger" style="float: right;" name="drop">drop</button>
            <button type="submit" class="btn btn-primary me-2" style="float: right;" name="matchformset">save</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
